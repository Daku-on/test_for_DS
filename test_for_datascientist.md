---
marp: true
theme: academic
paginate: true
_paginate: false
math: katex
---
<!-- _class: lead -->
# データサイエンティストもテストを書こう

## Test Drive Development for Data-scientists

### Dakuon

#### 2024/02/13

---
<!-- _header: 目次 -->

<div style="font-size: 0.5em">

1. なぜデータサイエンスでテストをしなきゃいけないの？
   1. 重要な観点の整理
   2. MECE (もれなくダブりなく) の実現
   3. 属人性の排除
2. テストってなんだろう
   1. プログラミングにおけるテストとTDD (テスト駆動開発)
   2. テストのメリット・デメリット
   3. ブラックボックステスト
   4. ホワイトボックステスト
3. データサイエンスでどのようにテストを導入するの？
   1. まず主キーチェックから始めよう
4. 実装してみよう
   1. pytestによる実装
5. まとめ
6. 参考文献
7. Appendix
   1. 正常系と異常系

</div>

---
<!-- _header: なぜデータサイエンスでテスト？ -->

テストはデータサイエンティストにも他人事ではない！

データサイエンスに必須の前処理が、本当に実装者の想定通りに動いているかを

- 誰の目にもわかるように
- 目検ではなく、システム的に

示した経験はあるでしょうか？(示したいと思ったことはありませんか？)

**テストを書きましょう。**

(前処理に限りません。例えば精度モニタリングもある種のCI/CDテストと言えるでしょう)

---
<!-- _header: 重要な観点の整理 -->

データ前処理を経て

1. このカラムにはNULLはなくなったはず
2. このカラムは英数字しか残らないはず
3. このカラムはHH:MMの形になってるはず

といった観点は事前に全部あげきっておいて損はありませんし、結果を確認する場合もいちいちJupyter Notebookを回して目で確認するのは楽しいものではありません。

**テストを書きましょう。**

---
<!-- _header: もれない・ダブりない処理の実現 -->

前処理を大量に書くと

---
<!-- _header: 属人性の排除 -->

データサイエンティストにも地味に付きまとうコードレビューですが、「あのレビュワーとこのレビュワーで観点がちがぁう！」「追加の確認観点が後出しされた！」とキレた経験はないでしょうか。

テスト観点を事前に整理・レビューしたうえで、テストが通るか田舎でレビューを行えば、レビュワーに依存せず少なくとも一定程度期待通りの動作はするコードを生成することができます。 (環境依存のバグについては `requirements.txt` なり poetry なりDockerで管理するべき話なので割愛します。) 

**テストを書きましょう。** (レビュワーはテスト観点の不足部分は早めに指摘しましょう)

---
<!-- _header: テスト観点を図解すると... -->

<img src="./img/test_model.png" width="75%" alt="テストフレームワーク">

<!-- footer: 引用元: [図１．テスト観点モデル](https://ww.qbook.jp/column/644.html) -->

---
<!-- _header: 参考文献 -->

1. [テストの観点とは？使いやすいテスト観点リストの構造・整え方を解説](https://www.qbook.jp/column/644.html)
